<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="main.css" rel = "stylesheet">

</head>
<body class="grey-bg">
  <div class="white-bg">
    <% for (let i = 0; i < ê¸€ëª©ë¡.length; i++){ %>
      <div class="list-box">
        <h4>
          <a href="/detail/<%= ê¸€ëª©ë¡[i]._id %>">
            <%= ê¸€ëª©ë¡[i].title %>
          </a>
          <a href="/edit/<%= ê¸€ëª©ë¡[i]._id %>">âœï¸</a>
          <span class="delete" data-id = "<%= ê¸€ëª©ë¡[i]._id %>">ğŸ—‘ï¸</span>
        </h4>
        <p>ê¸€ë‚´ìš©ì„</p>
      </div>
    <% } %>
  </div>  

  <script>
    document.querySelectorAll('.delete').forEach(function(button) {
      button.addEventListener('click', function(e) {
        const docId = e.target.dataset.id;
        fetch('/delete?docid=' + docId, {
          method: 'DELETE'
        })
        .then(response => response.text())
        .then(data => {
          if(data === 'ì‚­ì œ ì™„ë£Œ') {
            e.target.parentElement.parentElement.style.display = 'none';
          } else {
            alert('ì‚­ì œ ì‹¤íŒ¨');
          }
        })
        .catch(error => console.error('Error:', error));
      });
    });
  </script>
  

  </body>
</body>
</html>